---
alwaysApply: true
description: 代码注释风格规范 - 要求使用详细的中文注释
---

# 代码注释风格规范

## 基本原则

1. **所有注释必须使用中文**，确保团队协作和代码可读性
2. **关键逻辑必须有注释**，解释"为什么"而不仅仅是"是什么"
3. **复杂函数和类必须有 JSDoc 风格的文档注释**

## 注释类型

### 1. 文件头部注释
```javascript
// -*- coding: utf-8 -*-
// 文件用途的简要说明
```

### 2. 导入语句注释
```javascript
// 库名：简要说明该库的用途和在本文件中的作用
import { functionName } from "library";
```

### 3. 函数/方法注释
```javascript
/**
 * 函数名
 * 详细描述函数的功能、参数、返回值
 * @param {type} paramName - 参数说明
 * @returns {type} 返回值说明
 */
```

### 4. 行内注释
```javascript
// 解释这段代码的目的和上下文，而不是重复代码本身
const variable = complexExpression;
```

### 5. 复杂逻辑块注释
```javascript
// 步骤1：做什么
// 步骤2：为什么这样做
// 步骤3：可能遇到的问题
```

## 注释示例

参考 [app/api/chat/route.js](mdc:app/api/chat/route.js) 中的注释风格：

- 导入语句：说明库的用途
- 函数：JSDoc 风格说明功能
- 关键逻辑：解释业务逻辑和设计决策
- 错误处理：说明错误场景和用户提示

## 避免的注释

- ❌ 重复代码内容的注释
- ❌ 过时的注释（代码已变更但注释未更新）
- ❌ 过于简短的注释（如 `// 设置变量`）
- ❌ 英文注释（除非是第三方库的 API 文档）
